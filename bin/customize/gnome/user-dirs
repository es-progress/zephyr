#!/usr/bin/env bash
###############
## ES-Ubuntu ##
##           ##
## Config    ##
## GNOME     ##
## User dirs ##
###############

# Strict mode
set -euo pipefail
IFS=$'\n\t'

source "${DIR_ESUBUNTU}/bootstrap.sh"
check-not-root || exit 1

# Nautilus links
print-status "Copy global user dirs..."
sudo cp "${ES_CUSTOMIZE_CFG}/gnome/user-dirs.defaults" /etc/xdg/
print-finish
print-status "Copy user dirs..."
cp "${ES_CUSTOMIZE_CFG}/gnome/user-dirs.dirs" ~/.config/
print-finish

# Bookmarks
print-status "Add global bookmarks..."
echo -n >~/.config/gtk-3.0/bookmarks
bookmarks=$(read-file-cfg "${ES_CUSTOMIZE_CFG}/gnome/bookmarks")
for line in ${bookmarks}; do
    echo "${line}" >> ~/.config/gtk-3.0/bookmarks
done
print-finish

if [[ -f "${ES_CFG_LOCAL}/config/customize/gnome/bookmarks" ]]; then
    print-status "Add local bookmarks..."
    bookmarks=$(read-file-cfg "${ES_CFG_LOCAL}/config/customize/gnome/bookmarks")
    for line in ${bookmarks}; do
        echo "${line}" >> ~/.config/gtk-3.0/bookmarks
    done
    print-finish
fi

exit 0
