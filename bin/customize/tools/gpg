#!/usr/bin/env bash
###############
## ES-Ubuntu ##
##           ##
## Config    ##
## gnupg     ##
###############

# Strict mode
set -eufo pipefail
IFS=$'\n\t'

source "${PROJECT_ROOT}/bin/bootstrap.sh"
check-not-root

profile="${1:?"Profile missing"}"
if file=$(cfg-get "${profile}" tools/gpg-agent.conf); then
    print-status "Copy gnupg config files..."
    mkdir -p ~/.gnupg
    cp --no-preserve=mode,ownership "${file}" ~/.gnupg/gpg-agent.conf
    chmod go-rwx -R ~/.gnupg/gpg-agent.conf
    print-finish
fi

exit 0
