#!/usr/bin/env bash
###############
## ES-Ubuntu ##
##           ##
## Config    ##
## Home dirs ##
###############

# Strict mode
set -euo pipefail
IFS=$'\n\t'

source "${DIR_ESUBUNTU}/bootstrap.sh"
check-not-root || exit 1

print-status "Remove def dirs..."
rm -rf ~/Desktop ~/Documents ~/Downloads ~/Music ~/Pictures ~/Public ~/Templates ~/Videos
print-finish

if [[ -f "${ES_CFG_LOCAL}/config/customize/init/dir-home" ]]; then
    print-status "Create home dirs..."
    home_dirs=$(read-file-cfg "${ES_CFG_LOCAL}/config/customize/init/dir-home")
    for home_dir in ${home_dirs}; do
        # eval line to let the shell expand tilde and env vars
        arg=$(eval echo "${home_dir}")
        mkdir -p "${arg}"
    done
    print-finish
fi

print-status "Set permission on /home..."
sudo chown -R "${USER}:${USER}" ~
chmod -R o-rwx ~
print-finish

exit 0
