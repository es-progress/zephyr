#!/usr/bin/env bash
###############
## ES-Ubuntu ##
##           ##
## Config    ##
## sudoers   ##
###############

# Strict mode
set -euo pipefail
IFS=$'\n\t'

source "${PROJECT_ROOT}/bootstrap.sh"
check-not-root || exit 1

print-status "Customize sudoers..."
# Verify new file
visudo -c -s "${ES_CUSTOMIZE_CFG}/init/sudoers" >/dev/null
# Copy file
sudo cp "${ES_CUSTOMIZE_CFG}/init/sudoers" /etc/sudoers.d/ESubuntu
sudo chmod =0440 /etc/sudoers.d/ESubuntu
# Verify full sudoers
sudo visudo -c -s >/dev/null
print-finish

exit 0
