#!/usr/bin/env bash
###############
## ES-Ubuntu ##
##           ##
## Config    ##
## sudoers   ##
###############

# Strict mode
set -euo pipefail
IFS=$'\n\t'

# Bootstrap
source "${ESUBUNTU_HOME}/bootstrap.sh"

# Check if not run as root
check-not-root || exit 1

print-status "Customizing sudoers..."

# Verify new file
visudo -c -s "${CUSTOMIZE_CFG_DIR}/init/sudoers" >/dev/null

# Copy file
sudo cp "${CUSTOMIZE_CFG_DIR}/init/sudoers" "/etc/sudoers.d/ESubuntu"
sudo chmod =0440 "/etc/sudoers.d/ESubuntu"

# Verify full sudoers
sudo visudo -c -s >/dev/null

print-finish

exit 0
