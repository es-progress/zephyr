#!/usr/bin/env bash
#################
## ES-Ubuntu   ##
##             ##
## Config      ##
## User groups ##
#################

# Strict mode
set -euo pipefail
IFS=$'\n\t'

source "${PROJECT_ROOT}/bootstrap.sh"
check-not-root || exit 1

profile="${1:?"Profile missing"}"
if file=$(cfg-get "${profile}" init/groups); then
    print-header "Add user to groups..."
    groups=$(cfg-read "${file}")
    for group in ${groups}; do
        sudo adduser "${USER}" "${group}"
    done
    print-finish
fi

exit 0
